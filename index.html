<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Image Studio Pro</title>
    <link rel="stylesheet" href="index.css" />
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://esm.run/@google/genai"
        }
      }
    </script>
  <link rel="stylesheet" href="/index.css">
</head>
  <body>
    <div class="app-container">
      <!-- Sidebar for controls -->
      <aside class="sidebar">
        <header class="app-header">
          <h1>AI Studio</h1>
        </header>
        <nav class="tabs">
          <button class="tab-btn active" data-tab="generate">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 2L6.5 11h11L12 2z" />
              <circle cx="12" cy="16" r="5" />
            </svg>
            <span>Generate</span>
          </button>
          <button class="tab-btn" data-tab="edit">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 20h9" />
              <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" />
            </svg>
            <span>Edit</span>
          </button>
          <button class="tab-btn" data-tab="analyze">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="11" cy="11" r="8" />
              <line x1="21" y1="21" x2="16.65" y2="16.65" />
              <line x1="11" y1="8" x2="11" y2="14" />
              <line x1="8" y1="11" x2="14" y2="11" />
            </svg>
            <span>Analyze</span>
          </button>
          <button class="tab-btn" data-tab="gallery">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="3" y1="9" x2="21" y2="9"></line>
              <line x1="9" y1="3" x2="9" y2="21"></line>
            </svg>
            <span>Gallery</span>
          </button>
        </nav>

        <!-- Control Panels -->
        <div class="controls-container">
          <!-- Generate Controls -->
          <div id="generate-controls" class="controls-panel active">
            <h2>Generate a New Image</h2>
            <div class="form-group">
              <label for="generate-prompt">Prompt</label>
              <textarea
                id="generate-prompt"
                class="prompt-input"
                rows="4"
                placeholder="A futuristic cityscape at sunset, with flying cars."
              ></textarea>
            </div>
            <div class="form-group">
              <label for="negative-prompt">Negative Prompt (what to avoid)</label>
              <textarea
                id="negative-prompt"
                class="prompt-input"
                rows="2"
                placeholder="e.g., blurry, cartoon, text"
              ></textarea>
            </div>
            <div class="form-group">
              <label for="aspect-ratio-select">Aspect Ratio</label>
              <select id="aspect-ratio-select">
                <option value="1:1" selected>Square (1:1)</option>
                <option value="16:9">Widescreen (16:9)</option>
                <option value="9:16">Portrait (9:16)</option>
                <option value="4:3">Landscape (4:3)</option>
                <option value="3:4">Tall (3:4)</option>
              </select>
            </div>
             <div class="form-group">
                <label for="num-images-select">Number of Images</label>
                <select id="num-images-select">
                  <option value="1" selected>1</option>
                  <option value="2">2</option>
                  <option value="4">4</option>
                </select>
              </div>
            <button id="generate-btn" class="action-btn">Generate</button>
          </div>

          <!-- Edit Controls -->
          <div id="edit-controls" class="controls-panel">
            <h2>Edit an Image</h2>
            <div class="form-group">
              <div id="edit-image-dropzone" class="dropzone">
                <input type="file" id="edit-image-upload" accept="image/*" />
                <label for="edit-image-upload"
                  >Drag & drop an image here, or click to select.</label
                >
              </div>
            </div>
            <div class="form-group">
              <label for="edit-prompt">Editing Instructions</label>
              <textarea
                id="edit-prompt"
                class="prompt-input"
                rows="3"
                placeholder="e.g., Add a birthday hat to the cat."
                disabled
              ></textarea>
            </div>
            <button id="edit-btn" class="action-btn" disabled>
              Apply Edits
            </button>
          </div>

          <!-- Analyze Controls -->
          <div id="analyze-controls" class="controls-panel">
             <h2>Analyze an Image</h2>
            <div class="form-group">
              <div id="analyze-image-dropzone" class="dropzone">
                <input type="file" id="analyze-image-upload" accept="image/*" />
                <label for="analyze-image-upload"
                  >Drag & drop an image here, or click to select.</label
                >
              </div>
               <p id="analyze-instructions" class="instructions hidden">Use the chat below to ask questions about the image.</p>
            </div>
          </div>
          
           <!-- Gallery Controls -->
          <div id="gallery-controls" class="controls-panel">
            <h2>Image Gallery</h2>
            <p class="instructions">View your previously generated and edited images. Click a thumbnail to view details.</p>
          </div>
        </div>
      </aside>

      <!-- Main content area for output -->
      <main class="main-content">
        <div id="generate-output" class="output-panel active">
          <div class="placeholder">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="64"
              height="64"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 2L6.5 11h11L12 2z" />
              <circle cx="12" cy="16" r="5" />
            </svg>
            <h3>Image Generation</h3>
            <p>Describe the image you want to create in the sidebar.</p>
          </div>
        </div>

        <div id="edit-output" class="output-panel">
            <div class="placeholder">
                 <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9" /><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" /></svg>
                <h3>Image Editor</h3>
                <p>Upload an image to start editing.</p>
            </div>
        </div>

        <div id="analyze-output" class="output-panel">
             <div class="placeholder">
                 <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /><line x1="11" y1="8" x2="11" y2="14" /><line x1="8" y1="11" x2="14" y2="11" /></svg>
                <h3>Image Analysis</h3>
                <p>Upload an image to start a conversation about it.</p>
            </div>
            <div id="analyze-chat-container" class="hidden">
                <div id="analyze-image-preview"></div>
                <div id="chat-messages"></div>
                <form id="chat-form">
                    <input type="text" id="chat-input" placeholder="Ask a question about the image..." autocomplete="off" disabled>
                    <button type="submit" id="chat-send-btn" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    </button>
                </form>
            </div>
        </div>
          
        <div id="gallery-output" class="output-panel">
             <!-- Gallery items will be injected here -->
        </div>

        <!-- Modal for viewing gallery images -->
        <div id="gallery-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <button id="modal-close-btn" class="modal-close">&times;</button>
                <img id="modal-image" src="" alt="Gallery image preview"/>
                <div id="modal-info">
                    <p id="modal-prompt"></p>
                    <div class="modal-actions">
                        <button id="modal-copy-btn">Copy Prompt</button>
                        <button id="modal-delete-btn" class="danger">Delete</button>
                    </div>
                </div>
            </div>
        </div>

      </main>
    </div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
